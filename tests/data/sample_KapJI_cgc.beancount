; generated from input
; https://github.com/KapJI/capital-gains-calculator/blob/96f51d5ae18821f0603bd5b8d8641270ac11c7c9/tests/test_data/raw/test_data.csv

; compare output with https://github.com/KapJI/capital-gains-calculator/blob/main/tests/test_data/raw/expected_output.txt

; Date,Type,Symbol,Number,Price,Fees,Currency
; 2023-02-09,DIVIDEND,OPRA,4200,0.80,0.0,USD
; 2022-11-14,SELL,META,19,116.00,0.05,USD
; 2022-11-14,SELL,META,1,116.00,0.00,USD
; 2022-11-10,SELL,META,19,107.00,0.05,USD
; 2022-11-10,SELL,META,1,107.00,0.00,USD
; 2022-08-15,BUY,META,105,180.50,0.00,USD
; 2022-08-10,SELL,META,50,179.00,0.20,USD
; 2022-07-26,DIVIDEND,OTGLY,305,0.031737,0.0,USD
; 2022-06-06,STOCK_SPLIT,AMZN,209,0.00,0.00,USD
; 2022-05-15,BUY,FB,104,198.62,0.00,USD
; 2022-05-11,BUY,BABA,10,82.50,0.00,USD
; 2022-05-09,BUY,OPRA,60,5.35,0.00,USD
; 2022-05-09,BUY,BABA,5,85.50,0.00,USD
; 2022-05-09,BUY,BABA,15,85.50,0.00,USD
; 2022-05-09,BUY,OPRA,60,5.35,0.00,USD
; 2022-05-03,BUY,AMZN,1,2480.00,0.00,USD

1970-01-01 custom "uk-tax-config" "ignored-currencies" "USD" "GBP"

; Commodity declarations
1990-01-01 commodity FB
1990-01-01 commodity AMZN
1990-01-01 commodity BABA
1990-01-01 commodity OPRA
1990-01-01 commodity OTGLY

; Account declarations
1990-01-01 open Assets:Broker:Cash                    USD
1990-01-01 open Assets:Broker:FB    "FIFO"
1990-01-01 open Assets:Broker:AMZN    
1990-01-01 open Assets:Broker:BABA    
1990-01-01 open Assets:Broker:OPRA    
1990-01-01 open Assets:Broker:OTGLY    
1990-01-01 open Income:Dividends                       USD
1990-01-01 open Equity:OpeningBalances                 USD
1990-01-01 open Expenses:Commissions                   USD
1990-01-01 open Income:Broker:PnL

; Transactions
2023-02-09 * "OPRA Dividend"
  Income:Dividends                     -3.36 USD
  Assets:Broker:Cash                    3.36 USD

2022-11-14 * "Sell FB" #sell
  Assets:Broker:FB  -20 FB {} @ 116.00 USD
  Assets:Broker:Cash                 2203.95 USD  ; 20 shares * 116.00 - 0.05 commission
  Expenses:Commissions

2022-11-10 * "Sell FB" #sell
  Assets:Broker:FB  -20 FB {} @ 107.00 USD
  Assets:Broker:Cash                 2032.95 USD  ; 20 shares * 107.00 - 0.05 commission
  Expenses:Commissions

2022-08-15 * "Buy FB" #buy
  Assets:Broker:FB   105 FB {180.50 USD}
  Assets:Broker:Cash                 -18952.50 USD  ; 105 shares * 180.50

2022-08-10 * "Sell FB" #sell
  Assets:Broker:FB  -50 FB {} @ 179.00 USD
  Assets:Broker:Cash                  8948.80 USD  ; 50 shares * 179.00 - 0.20 commission
  Expenses:Commissions                0.2 USD
  Income:Broker:PnL

2022-07-26 * "OTGLY Dividend"
  Income:Dividends                     -9.68 USD
  Assets:Broker:Cash                    9.68 USD

;2022-06-06 * "AMZN Stock Split" #stock_split
;  Assets:Broker:AMZN   209 AMZN
;  Assets:Broker:AMZN  -209 AMZN

2022-05-15 * "Buy FB" #buy
  Assets:Broker:FB   104 FB {198.62 USD}
  Assets:Broker:Cash                 -20656.48 USD  ; 104 shares * 198.62

2022-05-11 * "Buy BABA" #buy
  Assets:Broker:BABA   10 BABA {82.5 USD}
  Assets:Broker:Cash                   -825.00 USD

2022-05-09 * "Buy OPRA" #buy
  Assets:Broker:OPRA   60 OPRA {5.35 USD}
  Assets:Broker:Cash                   -321.00 USD

2022-05-09 * "Buy BABA" #buy
  Assets:Broker:BABA   5 BABA {85.50 USD}
  Assets:Broker:Cash                   -427.5 USD

2022-05-09 * "Buy BABA" #buy
  Assets:Broker:BABA   15 BABA {85.50 USD}
  Assets:Broker:Cash                   -1282.5 USD

2022-05-09 * "Buy OPRA" #buy
  Assets:Broker:OPRA   60 OPRA {5.35 USD}
  Assets:Broker:Cash                   -321.00 USD

2022-05-03 * "Buy AMZN" #buy
  Assets:Broker:AMZN   1 AMZN {2480.00 USD}
  Assets:Broker:Cash                   -2480.00 USD 


; prices
2022-01-03 price GBP 1.34790 USD
2022-01-04 price GBP 1.35290 USD
2022-01-05 price GBP 1.35541 USD
2022-01-06 price GBP 1.35290 USD
2022-01-07 price GBP 1.35860 USD
2022-01-10 price GBP 1.35740 USD
2022-01-11 price GBP 1.36357 USD
2022-01-12 price GBP 1.37000 USD
2022-01-13 price GBP 1.37050 USD
2022-01-14 price GBP 1.36762 USD
2022-01-17 price GBP 1.36460 USD
2022-01-18 price GBP 1.35960 USD
2022-01-19 price GBP 1.36120 USD
2022-01-20 price GBP 1.35992 USD
2022-01-21 price GBP 1.35504 USD
2022-01-24 price GBP 1.34870 USD
2022-01-25 price GBP 1.35015 USD
2022-01-26 price GBP 1.34622 USD
2022-01-27 price GBP 1.33819 USD
2022-01-28 price GBP 1.33980 USD
2022-01-31 price GBP 1.34471 USD
2022-02-01 price GBP 1.35205 USD
2022-02-02 price GBP 1.35757 USD
2022-02-03 price GBP 1.35947 USD
2022-02-04 price GBP 1.35269 USD
2022-02-07 price GBP 1.35357 USD
2022-02-08 price GBP 1.35420 USD
2022-02-09 price GBP 1.35340 USD
2022-02-10 price GBP 1.35560 USD
2022-02-11 price GBP 1.35584 USD
2022-02-14 price GBP 1.35233 USD
2022-02-15 price GBP 1.35341 USD
2022-02-16 price GBP 1.35860 USD
2022-02-17 price GBP 1.36130 USD
2022-02-18 price GBP 1.35856 USD
2022-02-21 price GBP 1.35973 USD
2022-02-22 price GBP 1.35801 USD
2022-02-23 price GBP 1.35430 USD
2022-02-24 price GBP 1.33749 USD
2022-02-25 price GBP 1.34053 USD
2022-02-28 price GBP 1.34161 USD
2022-03-01 price GBP 1.33250 USD
2022-03-02 price GBP 1.34052 USD
2022-03-03 price GBP 1.33448 USD
2022-03-04 price GBP 1.32287 USD
2022-03-07 price GBP 1.31033 USD
2022-03-08 price GBP 1.31012 USD
2022-03-09 price GBP 1.31757 USD
2022-03-10 price GBP 1.30850 USD
2022-03-11 price GBP 1.30343 USD
2022-03-14 price GBP 1.30012 USD
2022-03-15 price GBP 1.30355 USD
2022-03-16 price GBP 1.31420 USD
2022-03-17 price GBP 1.31455 USD
2022-03-18 price GBP 1.31800 USD
2022-03-21 price GBP 1.31622 USD
2022-03-22 price GBP 1.32583 USD
2022-03-23 price GBP 1.32025 USD
2022-03-24 price GBP 1.31830 USD
2022-03-25 price GBP 1.31880 USD
2022-03-28 price GBP 1.30921 USD
2022-03-29 price GBP 1.30970 USD
2022-03-30 price GBP 1.31332 USD
2022-03-31 price GBP 1.31371 USD
2022-04-01 price GBP 1.31120 USD
2022-04-04 price GBP 1.31140 USD
2022-04-05 price GBP 1.30712 USD
2022-04-06 price GBP 1.30650 USD
2022-04-07 price GBP 1.30740 USD
2022-04-08 price GBP 1.30310 USD
2022-04-11 price GBP 1.30294 USD
2022-04-12 price GBP 1.30010 USD
2022-04-13 price GBP 1.31147 USD
2022-04-14 price GBP 1.30707 USD
2022-04-15 price GBP 1.30580 USD
2022-04-18 price GBP 1.30078 USD
2022-04-19 price GBP 1.29980 USD
2022-04-20 price GBP 1.30615 USD
2022-04-21 price GBP 1.30320 USD
2022-04-22 price GBP 1.28370 USD
2022-04-25 price GBP 1.27420 USD
2022-04-26 price GBP 1.25711 USD
2022-04-27 price GBP 1.25396 USD
2022-04-28 price GBP 1.24554 USD
2022-04-29 price GBP 1.25710 USD
2022-05-02 price GBP 1.24879 USD
2022-05-03 price GBP 1.24937 USD
2022-05-04 price GBP 1.26329 USD
2022-05-05 price GBP 1.23566 USD
2022-05-06 price GBP 1.23370 USD
2022-05-09 price GBP 1.23278 USD
2022-05-10 price GBP 1.23138 USD
2022-05-11 price GBP 1.22463 USD
2022-05-12 price GBP 1.21955 USD
2022-05-13 price GBP 1.22610 USD
2022-05-16 price GBP 1.23195 USD
2022-05-17 price GBP 1.24892 USD
2022-05-18 price GBP 1.23387 USD
2022-05-19 price GBP 1.24721 USD
2022-05-20 price GBP 1.24866 USD
2022-05-23 price GBP 1.25840 USD
2022-05-24 price GBP 1.25280 USD
2022-05-25 price GBP 1.25780 USD
2022-05-26 price GBP 1.25999 USD
2022-05-27 price GBP 1.26275 USD
2022-05-30 price GBP 1.26516 USD
2022-05-31 price GBP 1.25977 USD
2022-06-01 price GBP 1.24840 USD
2022-06-02 price GBP 1.25739 USD
2022-06-03 price GBP 1.24850 USD
2022-06-06 price GBP 1.25299 USD
2022-06-07 price GBP 1.25890 USD
2022-06-08 price GBP 1.25351 USD
2022-06-09 price GBP 1.24950 USD
2022-06-10 price GBP 1.23140 USD
2022-06-13 price GBP 1.21345 USD
2022-06-14 price GBP 1.19953 USD
2022-06-15 price GBP 1.21703 USD
2022-06-16 price GBP 1.23512 USD
2022-06-17 price GBP 1.22220 USD
2022-06-20 price GBP 1.22460 USD
2022-06-21 price GBP 1.22783 USD
2022-06-22 price GBP 1.22618 USD
2022-06-23 price GBP 1.22575 USD
2022-06-24 price GBP 1.22668 USD
2022-06-27 price GBP 1.22650 USD
2022-06-28 price GBP 1.21860 USD
2022-06-29 price GBP 1.21210 USD
2022-06-30 price GBP 1.21731 USD
2022-07-01 price GBP 1.20940 USD
2022-07-04 price GBP 1.20979 USD
2022-07-05 price GBP 1.19513 USD
2022-07-06 price GBP 1.19167 USD
2022-07-07 price GBP 1.20204 USD
2022-07-08 price GBP 1.20270 USD
2022-07-11 price GBP 1.18890 USD
2022-07-12 price GBP 1.18860 USD
2022-07-13 price GBP 1.18910 USD
2022-07-14 price GBP 1.18246 USD
2022-07-15 price GBP 1.18618 USD
2022-07-18 price GBP 1.19509 USD
2022-07-19 price GBP 1.19969 USD
2022-07-20 price GBP 1.19763 USD
2022-07-21 price GBP 1.19914 USD
2022-07-22 price GBP 1.20020 USD
2022-07-25 price GBP 1.20472 USD
2022-07-26 price GBP 1.20292 USD
2022-07-27 price GBP 1.21558 USD
2022-07-28 price GBP 1.21753 USD
2022-07-29 price GBP 1.21745 USD
2022-08-01 price GBP 1.22481 USD
2022-08-02 price GBP 1.21621 USD
2022-08-03 price GBP 1.21429 USD
2022-08-04 price GBP 1.21553 USD
2022-08-05 price GBP 1.20700 USD
2022-08-08 price GBP 1.20787 USD
2022-08-09 price GBP 1.20725 USD
2022-08-10 price GBP 1.22156 USD
2022-08-11 price GBP 1.21975 USD
2022-08-12 price GBP 1.21300 USD
2022-08-15 price GBP 1.20570 USD
2022-08-16 price GBP 1.20916 USD
2022-08-17 price GBP 1.20480 USD
2022-08-18 price GBP 1.19300 USD
2022-08-19 price GBP 1.18270 USD
2022-08-22 price GBP 1.17648 USD
2022-08-23 price GBP 1.18302 USD
2022-08-24 price GBP 1.17920 USD
2022-08-25 price GBP 1.18360 USD
2022-08-26 price GBP 1.17400 USD
2022-08-29 price GBP 1.17055 USD
2022-08-30 price GBP 1.16535 USD
2022-08-31 price GBP 1.16163 USD
2022-09-01 price GBP 1.15408 USD
2022-09-02 price GBP 1.15158 USD
2022-09-05 price GBP 1.15200 USD
2022-09-06 price GBP 1.15170 USD
2022-09-07 price GBP 1.15369 USD
2022-09-08 price GBP 1.15010 USD
2022-09-09 price GBP 1.15876 USD
2022-09-12 price GBP 1.16790 USD
2022-09-13 price GBP 1.14928 USD
2022-09-14 price GBP 1.15400 USD
2022-09-15 price GBP 1.14650 USD
2022-09-16 price GBP 1.14187 USD
2022-09-19 price GBP 1.14330 USD
2022-09-20 price GBP 1.13782 USD
2022-09-21 price GBP 1.12730 USD
2022-09-22 price GBP 1.12536 USD
2022-09-23 price GBP 1.08474 USD
2022-09-26 price GBP 1.06715 USD
2022-09-27 price GBP 1.07324 USD
2022-09-28 price GBP 1.08817 USD
2022-09-29 price GBP 1.11205 USD
2022-09-30 price GBP 1.11600 USD
2022-10-03 price GBP 1.13176 USD
2022-10-04 price GBP 1.14713 USD
2022-10-05 price GBP 1.13220 USD
2022-10-06 price GBP 1.11655 USD
2022-10-07 price GBP 1.10913 USD
2022-10-10 price GBP 1.10558 USD
2022-10-11 price GBP 1.09736 USD
2022-10-12 price GBP 1.10983 USD
2022-10-13 price GBP 1.13300 USD
2022-10-14 price GBP 1.11780 USD
2022-10-17 price GBP 1.13610 USD
2022-10-18 price GBP 1.13225 USD
2022-10-19 price GBP 1.12166 USD
2022-10-20 price GBP 1.12336 USD
2022-10-21 price GBP 1.12956 USD
2022-10-24 price GBP 1.12785 USD
2022-10-25 price GBP 1.14694 USD
2022-10-26 price GBP 1.16224 USD
2022-10-27 price GBP 1.15650 USD
2022-10-28 price GBP 1.16100 USD
2022-10-31 price GBP 1.14669 USD
2022-11-01 price GBP 1.14842 USD
2022-11-02 price GBP 1.13874 USD
2022-11-03 price GBP 1.11576 USD
2022-11-04 price GBP 1.13724 USD
2022-11-07 price GBP 1.15089 USD
2022-11-08 price GBP 1.15394 USD
2022-11-09 price GBP 1.13571 USD
2022-11-10 price GBP 1.17114 USD
2022-11-11 price GBP 1.18366 USD
2022-11-14 price GBP 1.17554 USD
2022-11-15 price GBP 1.18613 USD
2022-11-16 price GBP 1.19130 USD
2022-11-17 price GBP 1.18641 USD
2022-11-18 price GBP 1.18883 USD
2022-11-21 price GBP 1.18220 USD
2022-11-22 price GBP 1.18849 USD
2022-11-23 price GBP 1.20524 USD
2022-11-24 price GBP 1.21100 USD
2022-11-25 price GBP 1.20930 USD
2022-11-28 price GBP 1.19555 USD
2022-11-29 price GBP 1.19512 USD
2022-11-30 price GBP 1.20540 USD
2022-12-01 price GBP 1.22445 USD
2022-12-02 price GBP 1.22858 USD
2022-12-05 price GBP 1.21868 USD
2022-12-06 price GBP 1.21331 USD
2022-12-07 price GBP 1.22010 USD
2022-12-08 price GBP 1.22328 USD
2022-12-09 price GBP 1.22594 USD
2022-12-12 price GBP 1.22658 USD
2022-12-13 price GBP 1.23618 USD
2022-12-14 price GBP 1.24232 USD
2022-12-15 price GBP 1.21776 USD
2022-12-16 price GBP 1.21345 USD
2022-12-19 price GBP 1.21465 USD
2022-12-20 price GBP 1.21820 USD
2022-12-21 price GBP 1.20820 USD
2022-12-22 price GBP 1.20374 USD
2022-12-23 price GBP 1.20505 USD
2022-12-26 price GBP 1.20620 USD
2022-12-27 price GBP 1.20240 USD
2022-12-28 price GBP 1.20140 USD
2022-12-29 price GBP 1.20526 USD
2022-12-30 price GBP 1.20934 USD